<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="SimNPH">
<title>Examples for the Usage of the SimNPH Package â€¢ SimNPH</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Examples for the Usage of the SimNPH Package">
<meta property="og:description" content="SimNPH">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">SimNPH</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../../articles/vignettes_prebuild/simple_example.html">Examples for the Usage of the SimNPH Package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/SimNPH/SimNPH/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Examples for the Usage of the SimNPH Package</h1>
            <h3 data-toc-skip class="subtitle">Generate Data, Test and
Estimate, Summarise</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/SimNPH/SimNPH/blob/HEAD/vignettes/vignettes_prebuild/simple_example.Rmd" class="external-link"><code>vignettes/vignettes_prebuild/simple_example.Rmd</code></a></small>
      <div class="d-none name"><code>simple_example.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/philchalmers/SimDesign" class="external-link">SimDesign</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://simnph.github.io/SimNPH">SimNPH</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">makeCluster</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">clusterEvalQ</a></span><span class="op">(</span><span class="va">cl</span>, <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/philchalmers/SimDesign" class="external-link">SimDesign</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://simnph.github.io/SimNPH">SimNPH</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="a-simple-scenario-with-fixed-followup">A simple scenario with fixed followup<a class="anchor" aria-label="anchor" href="#a-simple-scenario-with-fixed-followup"></a>
</h2>
<p>This is a simple example on how to run a simulation of analyses of
datasets with a delayed treatment effect using the max-combo and the
log-rank test. The</p>
<div class="section level3">
<h3 id="setting-up-the-scenarios">Setting up the Scenarios<a class="anchor" aria-label="anchor" href="#setting-up-the-scenarios"></a>
</h3>
<p>Setting up the simulations to be run. <code>createDesign</code>
creates a <code>tibble</code> with every combination of the parameters.
Each line corresponds to one simulation to be run.</p>
<p>The function <code>generate_delayed_effect</code> needs the columns:
<code>n_trt</code>: number of patients in the treatment arm,
<code>n_ctrl</code>: number of patients in the control arm,
<code>delay</code>: delay until onset of treatment effect,
<code>hazard_ctrl</code>: hazard under control and before onset of
treatment effect, <code>hazart_trt</code>: hazard under treatment,
<code>t_max</code>: maximum time of observation.</p>
<p>An example design <code>tibble</code> with all parameters filled out
can be created with <code>desing_skeleton_delayed_effect</code>. Use the
function to output an example function call that you can copy and modify
as needed, or assign the result to a variable to obtain a design
<code>tibble</code> with some default parameters.</p>
<p>By default this will create a simulation design skeleton for
simulations of 50 patients in each arm, a constant hazard of 0.2 under
control and a hazard of 0.02 under treatment after the effect onset
varying from 0 to 10.</p>
<!-- TODO set parameters to be somehow relevant (e.g. not 5mts delay and 200mts follow-up) -->
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">N_sim</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span></span>
<span><span class="va">Assumptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/generate_delayed_effect.html">assumptions_delayed_effect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; expand.grid(</span></span>
<span><span class="co">#&gt;   delay=m2d(seq(0, 10, by=2)), # delay of 0, 1, ..., 10 months</span></span>
<span><span class="co">#&gt;   hazard_ctrl=m2r(24),         # median survival control of 24 months</span></span>
<span><span class="co">#&gt;   hazard_trt=m2r(36),          # median survival treatment of 36 months</span></span>
<span><span class="co">#&gt;   random_withdrawal=m2r(120)   # median time to random withdrawal 10 years</span></span>
<span><span class="co">#&gt; )</span></span>
<span></span>
<span><span class="va">Options</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/design_fixed_followup.html">design_fixed_followup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; expand.grid(</span></span>
<span><span class="co">#&gt;   n_trt=150,         # 150 patients in the treatment arm</span></span>
<span><span class="co">#&gt;   n_ctrl=150,        # 150 patients in the control arm</span></span>
<span><span class="co">#&gt;   followup=m2d(24),  # followup 2 years</span></span>
<span><span class="co">#&gt;   recruitment=m2d(6) # recruitment time 6 months</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; )</span></span>
<span></span>
<span><span class="va">Design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">Assumptions</span>, <span class="va">Options</span>, by<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Design</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="14%">
<col width="13%">
<col width="21%">
<col width="7%">
<col width="8%">
<col width="10%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="right">delay</th>
<th align="right">hazard_ctrl</th>
<th align="right">hazard_trt</th>
<th align="right">random_withdrawal</th>
<th align="right">n_trt</th>
<th align="right">n_ctrl</th>
<th align="right">followup</th>
<th align="right">recruitment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
</tr>
<tr class="even">
<td align="right">60.875</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
</tr>
<tr class="odd">
<td align="right">121.750</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
</tr>
<tr class="even">
<td align="right">182.625</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
</tr>
<tr class="odd">
<td align="right">243.500</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
</tr>
<tr class="even">
<td align="right">304.375</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="defining-the-generate-funcion">Defining the â€˜Generateâ€™ funcion<a class="anchor" aria-label="anchor" href="#defining-the-generate-funcion"></a>
</h3>
<p>Define the data generating â€˜generateâ€™ function, that beside
simulating the time to event also applies the different censoring
processes.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_generator</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">fixed_objects</span><span class="op">=</span><span class="cn">NULL</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="../../reference/generate_delayed_effect.html">generate_delayed_effect</a></span><span class="op">(</span><span class="va">condition</span>, <span class="va">fixed_objects</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/admin_censoring_time.html">recruitment_uniform</a></span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">recruitment</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/random_censoring_exp.html">random_censoring_exp</a></span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">random_withdrawal</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../../reference/admin_censoring_time.html">admin_censoring_time</a></span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">followup</span><span class="op">)</span></span>
<span><span class="op">}</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="defining-the-summarise-function">Defining the â€˜Summariseâ€™ function<a class="anchor" aria-label="anchor" href="#defining-the-summarise-function"></a>
</h3>
<p>Next, we need to specify a summary function that computes the desired
operating characteristics for each simulation scenario, and each
analysis method. In the example below, we use a summary function that
computes the power (as we consider scenarios under the alternative in
the example) of the log-rank test and the max-combo test across
simulated scenarios. For each scenario the function just averages the
number of times the computed p-value is below the significance level
obtain the power.</p>
<p>The results object contains the results of all replications of the
corresponding method for each row of the <code>Design</code> object. In
this example <code>results$p</code> contains all <code>N_sim</code>
p-values returned by the <code>analyse_maxcombo</code> or
<code>analyse_logrank</code> functions respectively. The Summary will
contain columns with the rejection rate and some other summary
statistics for both methods.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.05</span></span>
<span></span>
<span><span class="va">Summarise</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/create_summarise_function.html">create_summarise_function</a></span><span class="op">(</span></span>
<span>  maxcombo <span class="op">=</span> <span class="fu"><a href="../../reference/summarise_test.html">summarise_test</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span>,</span>
<span>  logrank  <span class="op">=</span> <span class="fu"><a href="../../reference/summarise_test.html">summarise_test</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="putting-it-all-together">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h3>
<p>Now we put it all together: in Design we give the scenarios defined
before. We want to run 100 replications for each scenario. We want to
generate data using the <code>generate_delayed_effect</code> function
using the parameters from <code>Design</code> and analyse each
replication of each scenario with the two functions
<code>analyse_logrank</code> and <code>analyse_maxcombo</code>. The
output should be summarised with the <code>Summarise</code> function
defined before and the simulations should be run in parallel.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SimDesign/man/runSimulation.html" class="external-link">runSimulation</a></span><span class="op">(</span></span>
<span>  <span class="va">Design</span>,</span>
<span>  replications <span class="op">=</span> <span class="va">N_sim</span>,</span>
<span>  generate <span class="op">=</span> <span class="va">my_generator</span>,</span>
<span>  analyse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    logrank  <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_logrank.html">analyse_logrank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    maxcombo <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_maxcombo.html">analyse_maxcombo</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  summarise <span class="op">=</span> <span class="va">Summarise</span>,</span>
<span>  cl <span class="op">=</span> <span class="va">cl</span>,</span>
<span>  save<span class="op">=</span><span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of parallel clusters in use: 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simulation complete. Total execution time: 33.73s</span></span></code></pre></div>
<p>Finally we select the interesting columns from the output. Since all
other parameters are the same for each scenario we just select delay.
And we are interested in the rejection rate of the tests.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span>select<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"delay"</span>, <span class="st">"maxcombo.rejection_0.05"</span>, <span class="st">"logrank.rejection_0.05"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">delay</th>
<th align="right">maxcombo.rejection_0.05</th>
<th align="right">logrank.rejection_0.05</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.61</td>
<td align="right">0.60</td>
</tr>
<tr class="even">
<td align="right">60.875</td>
<td align="right">0.49</td>
<td align="right">0.52</td>
</tr>
<tr class="odd">
<td align="right">121.750</td>
<td align="right">0.39</td>
<td align="right">0.35</td>
</tr>
<tr class="even">
<td align="right">182.625</td>
<td align="right">0.38</td>
<td align="right">0.30</td>
</tr>
<tr class="odd">
<td align="right">243.500</td>
<td align="right">0.19</td>
<td align="right">0.13</td>
</tr>
<tr class="even">
<td align="right">304.375</td>
<td align="right">0.17</td>
<td align="right">0.13</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="a-scenario-with-an-interim-analysis">A scenario with an interim analysis<a class="anchor" aria-label="anchor" href="#a-scenario-with-an-interim-analysis"></a>
</h2>
<p>In this scenario we extend the scenario from above to include a fixed
followup as well as an interim analysis after a fixed number of events.
For this we will define additional analyse functions.</p>
<p>First we extend the Design to include a column with the number of
events after which an interim analysis should be done.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Options</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/design_group_sequential.html">design_group_sequential</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; expand.grid(</span></span>
<span><span class="co">#&gt;   n_trt=200,          # 200 patients in the treatment arm</span></span>
<span><span class="co">#&gt;   n_ctrl=200,         # 200 patients in the control arm</span></span>
<span><span class="co">#&gt;   followup=m2d(48),   # maximum followup time 4 years</span></span>
<span><span class="co">#&gt;   recruitment=m2d(6), # recruitment time 6 months</span></span>
<span><span class="co">#&gt;   interim_events=150, # interim analysis after 150 events</span></span>
<span><span class="co">#&gt;   final_events=300    # final analysis after 300 events</span></span>
<span><span class="co">#&gt; )</span></span>
<span></span>
<span><span class="va">Design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">Assumptions</span>, <span class="va">Options</span>, by<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Design</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="7%">
<col width="10%">
<col width="9%">
<col width="16%">
<col width="5%">
<col width="6%">
<col width="8%">
<col width="10%">
<col width="13%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="right">delay</th>
<th align="right">hazard_ctrl</th>
<th align="right">hazard_trt</th>
<th align="right">random_withdrawal</th>
<th align="right">n_trt</th>
<th align="right">n_ctrl</th>
<th align="right">followup</th>
<th align="right">recruitment</th>
<th align="right">interim_events</th>
<th align="right">final_events</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">1461</td>
<td align="right">182.625</td>
<td align="right">150</td>
<td align="right">300</td>
</tr>
<tr class="even">
<td align="right">60.875</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">1461</td>
<td align="right">182.625</td>
<td align="right">150</td>
<td align="right">300</td>
</tr>
<tr class="odd">
<td align="right">121.750</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">1461</td>
<td align="right">182.625</td>
<td align="right">150</td>
<td align="right">300</td>
</tr>
<tr class="even">
<td align="right">182.625</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">1461</td>
<td align="right">182.625</td>
<td align="right">150</td>
<td align="right">300</td>
</tr>
<tr class="odd">
<td align="right">243.500</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">1461</td>
<td align="right">182.625</td>
<td align="right">150</td>
<td align="right">300</td>
</tr>
<tr class="even">
<td align="right">304.375</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">1461</td>
<td align="right">182.625</td>
<td align="right">150</td>
<td align="right">300</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="analyse-functions-with-an-interim-analysis">â€˜Analyseâ€™ functions with an interim analysis<a class="anchor" aria-label="anchor" href="#analyse-functions-with-an-interim-analysis"></a>
</h3>
<p>The <code>analyse_group_sequential</code> function allows to combine
two or more analyse functions to create an analysis function
corresponding to a group sequential design. The arguments are the times
or events after which the analyses are done, the nominal alpha at each
stage and the analyse functions to be used at each stage.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## O'Brien-Fleming Bounds for GSD with interim analysis at information time 1/2</span></span>
<span><span class="va">nominal_alpha</span> <span class="op">&lt;-</span> <span class="fu">ldbounds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ldbounds/man/ldBounds.html" class="external-link">ldBounds</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">nom.alpha</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">clusterExport</a></span><span class="op">(</span><span class="va">cl</span>, <span class="st">"nominal_alpha"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Analyse</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  logrank_seq  <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_group_sequential.html">analyse_group_sequential</a></span><span class="op">(</span></span>
<span>    followup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">interim_events</span>, <span class="va">condition</span><span class="op">$</span><span class="va">final_events</span><span class="op">)</span>,</span>
<span>    followup_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"event"</span>, <span class="st">"event"</span><span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">nominal_alpha</span>,</span>
<span>    analyse_functions <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_logrank.html">analyse_logrank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  maxcombo_seq <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_group_sequential.html">analyse_group_sequential</a></span><span class="op">(</span></span>
<span>    followup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">interim_events</span>, <span class="va">condition</span><span class="op">$</span><span class="va">final_events</span><span class="op">)</span>,</span>
<span>    followup_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"event"</span>, <span class="st">"event"</span><span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">nominal_alpha</span>,</span>
<span>    analyse_functions <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_maxcombo.html">analyse_maxcombo</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="a-summarise-function-for-the-more-complex-scenario">A â€˜Summariseâ€™ function for the more complex scenario<a class="anchor" aria-label="anchor" href="#a-summarise-function-for-the-more-complex-scenario"></a>
</h3>
<p>The output of the function created with
<code>analyse_group_sequential</code> contains additional columns.
<code>rejected_at_stage</code> includes the stage at which the null was
first rejected or <code>Inf</code> if the null was not rejected,
<code>N_pat</code> and <code>N_evt</code> contain the number of patients
recruited and the number of events observed before the null was rejected
and <code>followup</code> contains the time after study start at which
the last analysis was done.</p>
<p>The results object also includes the results returned by each stage
in <code>results_stages</code>, but here we only use the overall
test-decision.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Summarise</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/create_summarise_function.html">create_summarise_function</a></span><span class="op">(</span></span>
<span>  maxcombo_seq <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_group_sequential.html">summarise_group_sequential</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  logrank_seq <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_group_sequential.html">summarise_group_sequential</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="putting-it-all-together-1">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together-1"></a>
</h3>
<p>The call to <code>runSimulation</code> looks almost the same as above
but now the additional columns we defined in our <code>Summarise</code>
functions are included in the result.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SimDesign/man/runSimulation.html" class="external-link">runSimulation</a></span><span class="op">(</span></span>
<span>  <span class="va">Design</span>,</span>
<span>  replications <span class="op">=</span> <span class="va">N_sim</span>,</span>
<span>  generate <span class="op">=</span> <span class="va">my_generator</span>,</span>
<span>  analyse <span class="op">=</span> <span class="va">Analyse</span>,</span>
<span>  summarise <span class="op">=</span> <span class="va">Summarise</span>,</span>
<span>  cl <span class="op">=</span> <span class="va">cl</span>,</span>
<span>  save<span class="op">=</span><span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of parallel clusters in use: 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simulation complete. Total execution time: 01m 19.33s</span></span></code></pre></div>
<p>In the case of a group sequential design we are also interested in
the average running time of the study in terms of patients recruited,
number of events and running time of the study.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span>select<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"delay"</span>, </span>
<span>    <span class="st">"maxcombo_seq.rejection"</span>, <span class="st">"logrank_seq.rejection"</span>,</span>
<span>    <span class="st">"maxcombo_seq.n_pat"</span>, <span class="st">"logrank_seq.n_pat"</span>,</span>
<span>    <span class="st">"maxcombo_seq.n_evt"</span>, <span class="st">"logrank_seq.n_evt"</span>,</span>
<span>    <span class="st">"maxcombo_seq.followup"</span>, <span class="st">"logrank_seq.followup"</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="13%">
<col width="12%">
<col width="11%">
<col width="10%">
<col width="11%">
<col width="10%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="right">delay</th>
<th align="right">maxcombo_seq.rejection</th>
<th align="right">logrank_seq.rejection</th>
<th align="right">maxcombo_seq.n_pat</th>
<th align="right">logrank_seq.n_pat</th>
<th align="right">maxcombo_seq.n_evt</th>
<th align="right">logrank_seq.n_evt</th>
<th align="right">maxcombo_seq.followup</th>
<th align="right">logrank_seq.followup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.86</td>
<td align="right">0.88</td>
<td align="right">400</td>
<td align="right">400</td>
<td align="right">210.67</td>
<td align="right">207.96</td>
<td align="right">1238.02</td>
<td align="right">1214.58</td>
</tr>
<tr class="even">
<td align="right">60.875</td>
<td align="right">0.75</td>
<td align="right">0.80</td>
<td align="right">400</td>
<td align="right">400</td>
<td align="right">221.50</td>
<td align="right">224.64</td>
<td align="right">1325.05</td>
<td align="right">1350.43</td>
</tr>
<tr class="odd">
<td align="right">121.750</td>
<td align="right">0.80</td>
<td align="right">0.80</td>
<td align="right">400</td>
<td align="right">400</td>
<td align="right">225.06</td>
<td align="right">225.93</td>
<td align="right">1348.70</td>
<td align="right">1355.57</td>
</tr>
<tr class="even">
<td align="right">182.625</td>
<td align="right">0.60</td>
<td align="right">0.56</td>
<td align="right">400</td>
<td align="right">400</td>
<td align="right">233.59</td>
<td align="right">236.52</td>
<td align="right">1401.03</td>
<td align="right">1423.59</td>
</tr>
<tr class="odd">
<td align="right">243.500</td>
<td align="right">0.65</td>
<td align="right">0.55</td>
<td align="right">400</td>
<td align="right">400</td>
<td align="right">240.18</td>
<td align="right">241.09</td>
<td align="right">1435.57</td>
<td align="right">1442.82</td>
</tr>
<tr class="even">
<td align="right">304.375</td>
<td align="right">0.52</td>
<td align="right">0.45</td>
<td align="right">400</td>
<td align="right">400</td>
<td align="right">242.82</td>
<td align="right">242.93</td>
<td align="right">1444.03</td>
<td align="right">1444.56</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="estimation">Estimation<a class="anchor" aria-label="anchor" href="#estimation"></a>
</h2>
<div class="section level3">
<h3 id="calculating-the-true-values-of-the-summary-statistics">Calculating the true values of the summary statistics<a class="anchor" aria-label="anchor" href="#calculating-the-true-values-of-the-summary-statistics"></a>
</h3>
<p>To evaluate the performance of an estimator, we first compute the
values of some true summary statistics to which the estimates will be
compared. The most relevant true summary statistics can be computed by a
convenience function for each scenario. Just pipe the Design data.frame
to the function and the values of the statistics are added as
columns.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Options</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/design_fixed_followup.html">design_fixed_followup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; expand.grid(</span></span>
<span><span class="co">#&gt;   n_trt=150,         # 150 patients in the treatment arm</span></span>
<span><span class="co">#&gt;   n_ctrl=150,        # 150 patients in the control arm</span></span>
<span><span class="co">#&gt;   followup=m2d(24),  # followup 2 years</span></span>
<span><span class="co">#&gt;   recruitment=m2d(6) # recruitment time 6 months</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; )</span></span>
<span></span>
<span><span class="va">Design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">Assumptions</span>, <span class="va">Options</span>, by<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Design</span> <span class="op">&lt;-</span> <span class="va">Design</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../../reference/generate_delayed_effect.html">true_summary_statistics_delayed_effect</a></span><span class="op">(</span>cutoff_stats <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Design</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="6%">
<col width="5%">
<col width="9%">
<col width="3%">
<col width="3%">
<col width="4%">
<col width="6%">
<col width="10%">
<col width="10%">
<col width="6%">
<col width="6%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="right">delay</th>
<th align="right">hazard_ctrl</th>
<th align="right">hazard_trt</th>
<th align="right">random_withdrawal</th>
<th align="right">n_trt</th>
<th align="right">n_ctrl</th>
<th align="right">followup</th>
<th align="right">recruitment</th>
<th align="right">median_survival_trt</th>
<th align="right">median_survival_ctrl</th>
<th align="right">rmst_trt_20</th>
<th align="right">rmst_ctrl_20</th>
<th align="right">gAHR_20</th>
<th align="right">AHR_20</th>
<th align="right">AHRoc_20</th>
<th align="right">AHRoc_robust_20</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
<td align="right">1095.7500</td>
<td align="right">730.5</td>
<td align="right">19.87402</td>
<td align="right">19.81142</td>
<td align="right">0.6666667</td>
<td align="right">0.6666667</td>
<td align="right">0.6666667</td>
<td align="right">0.6666667</td>
</tr>
<tr class="even">
<td align="right">60.875</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
<td align="right">1065.3125</td>
<td align="right">730.5</td>
<td align="right">19.81142</td>
<td align="right">19.81142</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
</tr>
<tr class="odd">
<td align="right">121.750</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
<td align="right">1034.8750</td>
<td align="right">730.5</td>
<td align="right">19.81142</td>
<td align="right">19.81142</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
</tr>
<tr class="even">
<td align="right">182.625</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
<td align="right">1004.4375</td>
<td align="right">730.5</td>
<td align="right">19.81142</td>
<td align="right">19.81142</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
</tr>
<tr class="odd">
<td align="right">243.500</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
<td align="right">974.0000</td>
<td align="right">730.5</td>
<td align="right">19.81142</td>
<td align="right">19.81142</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
</tr>
<tr class="even">
<td align="right">304.375</td>
<td align="right">0.0009489</td>
<td align="right">0.0006326</td>
<td align="right">0.0001898</td>
<td align="right">150</td>
<td align="right">150</td>
<td align="right">730.5</td>
<td align="right">182.625</td>
<td align="right">943.5625</td>
<td align="right">730.5</td>
<td align="right">19.81142</td>
<td align="right">19.81142</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
<td align="right">1.0000000</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="defining-the-summarise-function-1">Defining the <code>Summarise</code> function<a class="anchor" aria-label="anchor" href="#defining-the-summarise-function-1"></a>
</h3>
<p>In the Summarise function the true value against which the estimator
should be compared has to be specified. If coverage and average width of
the confidence intervals should be estimated, the CI bounds should also
be specified.</p>
<p>The arguments to the functions are left un-evaluated and are later
evaluated in the <code>results</code> and <code>condition</code>
datasets respectively. So any expressions using variables from results
can be used for the estimated value and the CI bounds and expressions
using variables from condition can be used in the argument for the real
value.</p>
<p>In this case we want to compare the hazard ratio estimated by the Cox
model to the geometric average hazard ratio as well as to the hazard
ratio after onset of treatment, calculated from the two respective
columns of the Design data.frame.</p>
<p>Note that one name can be used twice to summarise the output of one
analysis method two times, like in this case, comparing it to two
different summary statistics.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Summarise</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/create_summarise_function.html">create_summarise_function</a></span><span class="op">(</span></span>
<span>    coxph<span class="op">=</span><span class="fu"><a href="../../reference/summarise_estimator.html">summarise_estimator</a></span><span class="op">(</span><span class="va">hr</span>, <span class="va">gAHR_20</span>, <span class="va">hr_lower</span>, <span class="va">hr_upper</span>, name<span class="op">=</span><span class="st">"gAHR"</span><span class="op">)</span>,</span>
<span>    coxph<span class="op">=</span><span class="fu"><a href="../../reference/summarise_estimator.html">summarise_estimator</a></span><span class="op">(</span><span class="va">hr</span>, <span class="va">hazard_trt</span><span class="op">/</span><span class="va">hazard_ctrl</span>, <span class="va">hr_lower</span>, <span class="va">hr_upper</span>, name<span class="op">=</span><span class="st">"HR"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="putting-it-all-together-2">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together-2"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Analyse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  coxph <span class="op">=</span> <span class="fu"><a href="../../reference/analyse_coxph.html">analyse_coxph</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SimDesign/man/runSimulation.html" class="external-link">runSimulation</a></span><span class="op">(</span></span>
<span>  <span class="va">Design</span>,</span>
<span>  replications <span class="op">=</span> <span class="va">N_sim</span>,</span>
<span>  generate <span class="op">=</span> <span class="va">my_generator</span>,</span>
<span>  analyse <span class="op">=</span> <span class="va">Analyse</span>,</span>
<span>  summarise <span class="op">=</span> <span class="va">Summarise</span>,</span>
<span>  cl <span class="op">=</span> <span class="va">cl</span>,</span>
<span>  save<span class="op">=</span><span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of parallel clusters in use: 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simulation complete. Total execution time: 2.38s</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span>select<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"delay"</span>, <span class="st">"coxph.HR.bias"</span>, <span class="st">"coxph.gAHR.bias"</span>, <span class="st">"coxph.HR.mse"</span>, </span>
<span>    <span class="st">"coxph.gAHR.mse"</span>, <span class="st">"coxph.HR.coverage"</span>, <span class="st">"coxph.gAHR.coverage"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="13%">
<col width="15%">
<col width="12%">
<col width="14%">
<col width="17%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="right">delay</th>
<th align="right">coxph.HR.bias</th>
<th align="right">coxph.gAHR.bias</th>
<th align="right">coxph.HR.mse</th>
<th align="right">coxph.gAHR.mse</th>
<th align="right">coxph.HR.coverage</th>
<th align="right">coxph.gAHR.coverage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.000</td>
<td align="right">0.0075220</td>
<td align="right">0.0075220</td>
<td align="right">0.0154434</td>
<td align="right">0.0154434</td>
<td align="right">0.96</td>
<td align="right">0.96</td>
</tr>
<tr class="even">
<td align="right">60.875</td>
<td align="right">0.0442796</td>
<td align="right">-0.2890537</td>
<td align="right">0.0205480</td>
<td align="right">0.1021393</td>
<td align="right">0.95</td>
<td align="right">0.53</td>
</tr>
<tr class="odd">
<td align="right">121.750</td>
<td align="right">0.1245452</td>
<td align="right">-0.2087882</td>
<td align="right">0.0372613</td>
<td align="right">0.0653423</td>
<td align="right">0.86</td>
<td align="right">0.75</td>
</tr>
<tr class="even">
<td align="right">182.625</td>
<td align="right">0.1239214</td>
<td align="right">-0.2094119</td>
<td align="right">0.0360994</td>
<td align="right">0.0645963</td>
<td align="right">0.88</td>
<td align="right">0.74</td>
</tr>
<tr class="odd">
<td align="right">243.500</td>
<td align="right">0.1936838</td>
<td align="right">-0.1396495</td>
<td align="right">0.0613589</td>
<td align="right">0.0433474</td>
<td align="right">0.74</td>
<td align="right">0.89</td>
</tr>
<tr class="even">
<td align="right">304.375</td>
<td align="right">0.2015672</td>
<td align="right">-0.1317661</td>
<td align="right">0.0695069</td>
<td align="right">0.0462399</td>
<td align="right">0.72</td>
<td align="right">0.85</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tobias Fellinger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
