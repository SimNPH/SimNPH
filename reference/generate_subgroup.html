<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generate Dataset with different treatment effect in subgroup
Create an empty assumtions data.frame for generate_subgroup
Calculate true summary statistics for scenarios with differential treatment effect in subgroup
Calculate hazards in treatment arm in subgroup and compliment"><title>Generate Dataset with different treatment effect in subgroup — generate_subgroup • SimNPH</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Dataset with different treatment effect in subgroup — generate_subgroup"><meta property="og:description" content="Generate Dataset with different treatment effect in subgroup
Create an empty assumtions data.frame for generate_subgroup
Calculate true summary statistics for scenarios with differential treatment effect in subgroup
Calculate hazards in treatment arm in subgroup and compliment"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SimNPH</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignettes_prebuild/simple_example.html">Examples for the Usage of the SimNPH Package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate Dataset with different treatment effect in subgroup</h1>
      
      <div class="d-none name"><code>generate_subgroup.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate Dataset with different treatment effect in subgroup</p>
<p>Create an empty assumtions data.frame for generate_subgroup</p>
<p>Calculate true summary statistics for scenarios with differential treatment effect in subgroup</p>
<p>Calculate hazards in treatment arm in subgroup and compliment</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_subgroup</span><span class="op">(</span><span class="va">condition</span>, fixed_objects <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">assumptions_subgroup</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">true_summary_statistics_subgroup</span><span class="op">(</span></span>
<span>  <span class="va">Design</span>,</span>
<span>  cutoff_stats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  milestones <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fixed_objects <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hazard_subgroup_from_PH_effect_size</span><span class="op">(</span></span>
<span>  <span class="va">design</span>,</span>
<span>  target_power_ph <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  final_events <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  target_alpha <span class="op">=</span> <span class="fl">0.025</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cen_rate_from_cen_prop_subgroup</span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>condition</dt>
<dd><p>condition row of Design dataset</p></dd>


<dt>fixed_objects</dt>
<dd><p>additional settings, see details</p></dd>


<dt>Design</dt>
<dd><p>Design data.frame for subgroup</p></dd>


<dt>cutoff_stats</dt>
<dd><p>(optionally named) cutoff times, see details</p></dd>


<dt>milestones</dt>
<dd><p>(optionally named) vector of times at which milestone survival should be calculated</p></dd>


<dt>design</dt>
<dd><p>design data.frame</p></dd>


<dt>target_power_ph</dt>
<dd><p>target power under proportional hazards</p></dd>


<dt>final_events</dt>
<dd><p>target events for inversion of Schönfeld Formula, defaults to <code>condition$final_events</code></p></dd>


<dt>target_alpha</dt>
<dd><p>target one-sided alpha level for the power calculation</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>For generate_subgroup: A dataset with the columns t (time) and trt
(1=treatment, 0=control), evt (event, currently TRUE for all observations)</p>


<p>For assumptions_subgroup: a design tibble with default values invisibly</p>


<p>For true_summary_statistics_subgroup: the design data.frame
passed as argument with the additional columns</p>


<p>For hazard_subgroup_from_PH_effect_size: the design data.frame passed as
argument with the additional columns hazard_trt and hazard_subgroup.</p>


<p>for cen_rate_from_cen_prop_subgroup: design data.frame with the
additional column random_withdrawal</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Condidtion has to contain the following columns:</p><ul><li><p>n_trt number of paitents in treatment arm</p></li>
<li><p>n_ctrl number of patients in control arm</p></li>
<li><p>hazard_ctrl hazard in the control arm</p></li>
<li><p>hazard_trt hazard in the treatment arm for not cured patients</p></li>
<li><p>hazard_subgroup hazard in the subgroup in the treatment arm</p></li>
<li><p>prevalence proportion of cured patients</p></li>
</ul><p>assumptions_subgroup prints the code to generate a default
design tibble for use with generate_subgroup and returns the
evaluated code invisibly. This function is intended to be used to copy
paste the code and edit the parameters.</p>
<p><code>cutoff_stats</code> are the times used to calculate the statistics like average
hazard ratios and RMST, that are only calculated up to a certain point.</p>
<p><code>hazard_subgroup_from_PH_effect_size</code> calculates the hazard rate in
the subgroup and the compliment of the subgroup in the treatment arm as
follows: First, the hazard ratio needed to archive the desired power under
proportional hazards is calculated by inverting Schönfeld's sample size
formula. Second the median survival times for both arms under this hazard
ratio and proportional hazards are calculated. Finally the hazard rate of
the treatment arm in the subgroup and its complement are set such that the
median survival time is the same as the one calculated under proportional
hazards.</p>
<p>This is a heuristic and to some extent arbitrary approach to calculate
hazard ratios that correspond to reasonable and realistic scenarios.</p>
<p>cen_rate_from_cen_prop_subgroup takes the proportion of
censored patients from the column <code>censoring_prop</code>. This column describes
the proportion of patients who are censored randomly before experiencing an
event, without regard to administrative censoring.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>generate_subgroup()</code>: simulates a dataset with a mixture of cured
patients</p></li>
<li><p><code>assumptions_subgroup()</code>: generate default assumptions tibble</p></li>
<li><p><code>true_summary_statistics_subgroup()</code>: calculate true summary statistics for subgroup</p></li>
<li><p><code>hazard_subgroup_from_PH_effect_size()</code>: Calculate hazards in treatement arm</p></li>
<li><p><code>cen_rate_from_cen_prop_subgroup()</code>: calculate censoring rate from censoring proportion</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">one_simulation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">assumptions_subgroup</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="design_fixed_followup.html">design_fixed_followup</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    by<span class="op">=</span><span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">generate_subgroup</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_ctrl=m2r(24),              # med. survival ctrl. 24 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_trt=m2r(36),               # med. survival trt 36 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_subgroup=m2r(240),         # med. survival subgroup 20 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   prevalence=seq(0.2, 0.8, by=0.2), # prevalence 0.2, 0.4, 0.6, 0.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   random_withdrawal=m2r(120)        # median time to random withdrawal 10 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_trt=150,         # 150 patients in the treatment arm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_ctrl=150,        # 150 patients in the control arm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   followup=m2d(24),  # followup 2 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   recruitment=m2d(6) # recruitment time 6 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">one_simulation</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      t trt  evt subgroup</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1661   1 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   23   1 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  209   1 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  227   1 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   56   1 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  244   1 TRUE        0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">one_simulation</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        t trt  evt subgroup</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 295 3573   0 TRUE        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 296   40   0 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 297 1107   0 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 298  464   0 TRUE        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 299 2063   0 TRUE        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 300 1871   0 TRUE        0</span>
<span class="r-in"><span><span class="va">Design</span> <span class="op">&lt;-</span> <span class="fu">assumptions_subgroup</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_ctrl=m2r(24),              # med. survival ctrl. 24 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_trt=m2r(36),               # med. survival trt 36 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_subgroup=m2r(240),         # med. survival subgroup 20 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   prevalence=seq(0.2, 0.8, by=0.2), # prevalence 0.2, 0.4, 0.6, 0.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   random_withdrawal=m2r(120)        # median time to random withdrawal 10 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-in"><span><span class="va">Design</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    hazard_ctrl   hazard_trt hazard_subgroup prevalence random_withdrawal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.0009488668 0.0006325779    9.488668e-05        0.2      0.0001897734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.0009488668 0.0006325779    9.488668e-05        0.4      0.0001897734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.0009488668 0.0006325779    9.488668e-05        0.6      0.0001897734</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.0009488668 0.0006325779    9.488668e-05        0.8      0.0001897734</span>
<span class="r-in"><span><span class="va">my_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">assumptions_subgroup</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="design_fixed_followup.html">design_fixed_followup</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    by<span class="op">=</span><span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_ctrl=m2r(24),              # med. survival ctrl. 24 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_trt=m2r(36),               # med. survival trt 36 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_subgroup=m2r(240),         # med. survival subgroup 20 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   prevalence=seq(0.2, 0.8, by=0.2), # prevalence 0.2, 0.4, 0.6, 0.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   random_withdrawal=m2r(120)        # median time to random withdrawal 10 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_trt=150,         # 150 patients in the treatment arm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_ctrl=150,        # 150 patients in the control arm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   followup=m2d(24),  # followup 2 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   recruitment=m2d(6) # recruitment time 6 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-in"><span><span class="va">my_design</span> <span class="op">&lt;-</span> <span class="fu">true_summary_statistics_subgroup</span><span class="op">(</span><span class="va">my_design</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_design</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    hazard_ctrl   hazard_trt hazard_subgroup prevalence random_withdrawal n_trt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.0009488668 0.0006325779    9.488668e-05        0.2      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.0009488668 0.0006325779    9.488668e-05        0.4      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.0009488668 0.0006325779    9.488668e-05        0.6      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.0009488668 0.0006325779    9.488668e-05        0.8      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_ctrl followup recruitment median_survival_trt median_survival_ctrl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    150    730.5     182.625            1422.745                730.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    150    730.5     182.625            2001.270                730.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    150    730.5     182.625            3143.728                730.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    150    730.5     182.625            5119.929                730.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">assumptions_subgroup</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="design_fixed_followup.html">design_fixed_followup</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  by<span class="op">=</span><span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_ctrl=m2r(24),              # med. survival ctrl. 24 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_trt=m2r(36),               # med. survival trt 36 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_subgroup=m2r(240),         # med. survival subgroup 20 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   prevalence=seq(0.2, 0.8, by=0.2), # prevalence 0.2, 0.4, 0.6, 0.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   random_withdrawal=m2r(120)        # median time to random withdrawal 10 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> expand.grid(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_trt=150,         # 150 patients in the treatment arm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_ctrl=150,        # 150 patients in the control arm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   followup=m2d(24),  # followup 2 years</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   recruitment=m2d(6) # recruitment time 6 months</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> )</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_design</span><span class="op">$</span><span class="va">hazard_trt</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="va">my_design</span><span class="op">$</span><span class="va">hazard_subgroup</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="va">my_design</span><span class="op">$</span><span class="va">hr_subgroup_relative</span> <span class="op">&lt;-</span> <span class="fl">0.9</span></span></span>
<span class="r-in"><span><span class="va">my_design</span><span class="op">$</span><span class="va">final_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="op">(</span><span class="va">my_design</span><span class="op">$</span><span class="va">n_ctrl</span> <span class="op">+</span> <span class="va">my_design</span><span class="op">$</span><span class="va">n_trt</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.75</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_design</span> <span class="op">&lt;-</span> <span class="fu">hazard_subgroup_from_PH_effect_size</span><span class="op">(</span><span class="va">my_design</span>, target_power_ph<span class="op">=</span><span class="fl">0.9</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_design</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    hazard_ctrl   hazard_trt hazard_subgroup prevalence random_withdrawal n_trt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.0009488668 0.0006288263    0.0005659437        0.2      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.0009488668 0.0006421335    0.0005779202        0.4      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.0009488668 0.0006558156    0.0005902340        0.6      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.0009488668 0.0006698768    0.0006028891        0.8      0.0001897734   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_ctrl followup recruitment hr_subgroup_relative final_events</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    150    730.5     182.625                  0.9          225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    150    730.5     182.625                  0.9          225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    150    730.5     182.625                  0.9          225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    150    730.5     182.625                  0.9          225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   target_median_trt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          1125.442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          1125.442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          1125.442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          1125.442</span>
<span class="r-in"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  hazard_ctrl<span class="op">=</span><span class="fl">0.2</span>,                   <span class="co"># hazard under control and before treatment effect</span></span></span>
<span class="r-in"><span>  hazard_trt<span class="op">=</span><span class="fl">0.02</span>,                   <span class="co"># hazard after onset of treatment effect</span></span></span>
<span class="r-in"><span>  hazard_subgroup<span class="op">=</span><span class="fl">0.01</span>,              <span class="co"># hazard in the subgroup in treatment</span></span></span>
<span class="r-in"><span>  prevalence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.5</span><span class="op">)</span>,           <span class="co"># subgroup prevalence</span></span></span>
<span class="r-in"><span>  censoring_prop<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.25</span>, <span class="fl">0.01</span><span class="op">)</span>, <span class="co"># 10%, 25%, 1% random censoring</span></span></span>
<span class="r-in"><span>  followup<span class="op">=</span><span class="fl">100</span>,                      <span class="co"># followup of 100 days</span></span></span>
<span class="r-in"><span>  n_trt<span class="op">=</span><span class="fl">50</span>,                          <span class="co"># 50 patients treatment</span></span></span>
<span class="r-in"><span>  n_ctrl<span class="op">=</span><span class="fl">50</span>                          <span class="co"># 50 patients control</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cen_rate_from_cen_prop_subgroup</span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hazard_ctrl hazard_trt hazard_subgroup prevalence censoring_prop followup</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         0.2       0.02            0.01        0.2           0.10      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         0.2       0.02            0.01        0.5           0.10      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         0.2       0.02            0.01        0.2           0.25      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         0.2       0.02            0.01        0.5           0.25      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         0.2       0.02            0.01        0.2           0.01      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         0.2       0.02            0.01        0.5           0.01      100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_trt n_ctrl random_withdrawal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    50     50      0.0030440737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    50     50      0.0026408014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    50     50      0.0108976367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    50     50      0.0095627716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    50     50      0.0002558513</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    50     50      0.0002211651</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tobias Fellinger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

