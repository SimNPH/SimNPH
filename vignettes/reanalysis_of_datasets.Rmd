---
title: "Re-Analysis of Datasets"
author: "Tobias Fellinger"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(error = FALSE)
knitr::opts_chunk$set(message = FALSE)

library(SimNPH)
library(tidyverse)
library(rlang)
library(survival)

# months to days
m2d <- \(t) 365.25*t/12
```

```{r}
# files for IPD
ipd_files <- data.frame(
  file = c(
    "../data/ipd/506_time_to_relapse.Rdata",
    "../data/ipd/6481_os.Rdata",
    "../data/ipd/9883_os.Rdata"
  ),
  name = c(
    "Terifluomide",
    "Nivolumab",
    "Prembrolizumap"
  )
)

all_ipd_data <- lapply(split(ipd_files, 1:nrow(ipd_files)), \(i){
  load(i$file)
  names(all_patients) <- c("t", "evt", "trt")
  all_patients$evt <- as.logical(all_patients$evt)
  all_patients
})
names(all_ipd_data) <- ipd_files$name
```

# Terifluomide

```{r}
ipd_data <- all_ipd_data[["Terifluomide"]]
```

```{r, child="reanalysis_of_datasets_child.Rmd"}

```

# Nivolumab

```{r}
ipd_data <- all_ipd_data[["Nivolumab"]]
```

```{r, child="reanalysis_of_datasets_child.Rmd"}

```

# Prembrolizumap

```{r}
ipd_data <- all_ipd_data[["Prembrolizumap"]]
```

```{r, child="reanalysis_of_datasets_child.Rmd"}

```
